<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0,viewport-fit=cover">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mitr:wght@200;300;400;500;600;700&display=swap"
        rel="stylesheet">

    <!---------------------------------------------- link bootstrap ------------------------------------------------------>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <script src="bootstrap-5.0.2-dist/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style/style.css">
    <title>Summerway</title>
</head>

<body>
    <div class="container-fluid">
        <!-- <div class="sticky-top"> -->
        <div class="row ">
            <div class="col-12 bg-grape padding-3">
                <h2>Profile</h2>
            </div>
        </div>
    </div>
    <br>



    <div class="padding-5">
        <div class="card ">
            <div class="profile"><br>
                <p id="os"><b>OS:</b> </p>
                <p id="language"><b>Language:</b> </p>
                <p id="version"><b>Version:</b> </p>
                <p id="isInClient"><b>isInClient:</b> </p>
                <p id="accessToken"><b>AccessToken:</b> </p>
                <img id="pictureUrl" width="100%">
                <p id="userId"><b>userId:</b> </p>
                <p id="displayName"><b>displayName:</b> </p>
                <p id="statusMessage"><b>statusMessage:</b> </p>
                <p id="decodedIDToken"><b>email:</b> </p>

            </div>
            <br>
            <button id="btnMsg" onclick="sendMsg()">Send Message</button>

        </div>
    </div>
    <br>
    <br><br><br><br>
    </div>
    <footer class="fixed-bottom bg-grape center">
        <div class="row">
            <div class="col-3">
                <a href="home.html">
                    <img src="icon/home.png">
                    <p class="p-1">Home</p>
                </a>
            </div>
            <div class="col-3">
                <a href="menu.html">
                    <img src="icon/menu.png">
                    <p class="p-1">Menu</p>
                </a>
            </div>
            <div class="col-3">
                <a href="history.html">
                    <img src="icon/history.png">
                    <p class="p-1">History</p>
                </a>
            </div>
            <div class="col-3">
                <a href="index.html">
                    <img src="icon/user.png">
                    <p class="p-1">Profile</p>
                </a>
            </div>
        </div>
    </footer>

    <script src="js/vconsole.min.js"></script>
    <script>
        var vConsole = new VConsole()
        console.log("Hello World!")
    </script>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        async function sendMsg() {
            if (liff.getContext().type !== "none") {
                await liff.sendMessages([
                    {
                        "type": "sticker",
                        "stickerId": 1,
                        "packageId": 1
                    }
                ])
                alert("Messages sent")
            }
        }

        async function getUserProfile() {
            const profile = await liff.getProfile()
            document.getElementById("pictureUrl").src = profile.pictureUrl
            document.getElementById("userId").append(profile.useId)
            document.getElementById("statusMessage").append(profile.statusMessage)
            document.getElementById("displayName").append(profile.displayName)
            document.getElementById("decodeIDToken").append(liff.getDecodeIDToken().email)
        }

        function getEnvironment() {
            document.getElementById("os").append(liff.getOS())
            document.getElementById("language").append(liff.getLanguage())
            document.getElementById("version").append(liff.getVersion())
            document.getElementById("accessToken").append(liff.getAccessToken())
            document.getElementById("isInClient").append(liff.isInClient())
        }

        async function getFriendship() {
            const friend = await liff.getFriendship()
            document.getElementById("friendship").append(friend.friendFlag)
            if (!friend.friendFlag) {
                if (confirm("คุณยังไม่ได้เพิ่ม Bot เป็นเพื่อน จะเพิ่มเลยไหม?")) {
                    window.location = "https://line.me/R/ti/p/@178yoa"
                }
            }
        }

        async function main() {
            await liff.init({ liffId: "1656199226-JGye8wkD" })
            getEnvironment()
            getUserProfile()
            getContext()
            getFriendship()
        }
        main()
    </script>


</body>

</html>